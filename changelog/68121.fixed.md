Fix `test mode` causing unintended execution when non-boolean values are passed.
